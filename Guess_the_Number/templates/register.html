<!DOCTYPE html>
<html>
<head>
  <title>Register</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <body class="register-page">
  <h1>Register</h1>
  <form id="registerForm">
    <input type="text" name="username" placeholder="Username" required />
    <input type="password" name="password" placeholder="Password" required />
    <button type="submit">Register</button>
  </form>

  <script>
    document.getElementById("registerForm").addEventListener("submit", async function (e) {
      e.preventDefault();  // Prevent form submission
      const form = e.target;
      const formData = new FormData(form);  // Grab form data

      const response = await fetch("/register", {
        method: "POST",
        body: formData,  // Send form data in request body
        credentials: "include"  // Include cookies with requests
      });

      if (response.redirected) {
        window.location.href = response.url;  // Redirect to login page after successful registration
      } else {
        const text = await response.text();
        alert("Registration failed: " + text);  // Show error if registration fails
      }
    });
  </script>
</body>
</html>
